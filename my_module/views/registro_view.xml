<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Vista Tree -->
    <record id="view_tree" model="ir.ui.view">
        <field name="name">view.tree.registro</field>
        <field name="model">m.registro</field>
        <field name="arch" type="xml">
            <tree>
                <field name="nombre" />
                <field name="fecha_nacimiento" />
                <field name="edad" />
                <field name="nacionalidad" />
                <field name="company_id" />
                <field name="direccion" />
                <field name="create_date" />
                <field name="create_uid" />
                <field name="write_date" />
                <field name="write_uid" />
            </tree>
        </field>
    </record>

    <!-- Vista Form -->
    <record id="view_form_registro" model="ir.ui.view">
        <field name="name">view.form.registro</field>
        <field name="model">m.registro</field>
        <field name="arch" type="xml">
            <form string="">
                <sheet>
                    <group string="Detalles de registro" name="group_top">
                        <group name="group_left">
                            <field name="nombre" required="True"/>
                            <field name="fecha_nacimiento" required="True"/>
                            <field name="edad" readonly="True"/>
                            <field name="nacionalidad" required="True"/>
                            <field name="company_id" groups="base.group_multi_company" />
                            <field name="direccion" attrs="{'invisible': [('nombre_pais','=','Costa Rica')]}"/>
                            <field name="nombre_pais" invisible="True"/>
                        </group>
                        <group name="group_right">
                            <field name="create_date" readonly="True"/>
                            <field name="create_uid" readonly="True"/>
                            <field name="write_date" readonly="True"/>
                            <field name="write_uid" readonly="True"/>
                        </group>
                    </group>
                    <notebook>
                        <page name="detalle_salida" string="Detalle de Salidas">
                            <field name="detalle_salida">
                                <tree editable="bottom">
                                    <field name="pais_visitado" required="True"/>
                                    <field name="fecha_salida" required="True"/>
                                    <field name="fecha_entrada" required="True"/>
                                    <field name="dias" readonly="True"/>
                                    <field name="observaciones" required="True"/>
                                    <field name="registro_salida" readonly="True"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Action -->
    <record id="action_view_registro" model="ir.actions.act_window">
        <field name="name">Registro Salidas</field>
        <field name="res_model">m.registro</field>
        <field name="view_mode">tree,form</field>
    </record>

    <record id="registro_view_rule" model="ir.rule">
        <field name="name">Registro Rule</field>
        <field name="model_id" ref="model_m_registro" />
        <field name="global" eval="True" />
        <field name="domain_force">['|', '('company_id', '=', False), ('company_id', '=', company_id)]</field>
    </record>

    <!-- Menu -->
    <menuitem
        id="menu_registro"
        name="Registro Salidas"
        action="my_module.action_view_registro"
    />
</odoo>
